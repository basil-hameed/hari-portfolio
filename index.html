<!-- Replace the existing script section with this updated code -->
<script>
    // Updated product fetch using FakeStoreAPI
    async function fetchProducts() {
        try {
            const response = await fetch('https://fakestoreapi.com/products/category/electronics');
            const products = await response.json();
            displayProducts(products);
        } catch (error) {
            console.error('Error fetching products:', error);
            // Fallback dummy data
            displayProducts([{
                title: 'Sample Smartphone',
                price: 599.99,
                description: 'Latest model smartphone with advanced features',
                image: 'https://via.placeholder.com/300x200?text=Smartphone'
            }]);
        }
    }

    // Updated display products function
    function displayProducts(products) {
        const container = document.getElementById('products');
        if (!products || products.length === 0) {
            container.innerHTML = `<div class="col-12 text-center"><h4>No products found. Please try again later.</h4></div>`;
            return;
        }

        container.innerHTML = products.map(product => `
            <div class="col-md-4">
                <div class="card product-card h-100">
                    <img src="${product.image}" class="card-img-top product-image">
                    <div class="card-body">
                        <h5 class="card-title">${product.title}</h5>
                        <p class="card-text">${product.description || 'High-quality electronics product'}</p>
                        <p class="h5 text-primary">$${product.price.toFixed(2)}</p>
                        <button class="btn btn-primary mt-2" onclick="addToCart('${product.title.replace(/'/g, "\\'")}')">
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Rest of the original cart and checkout functionality remains the same
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const cartCount = document.getElementById('cartCount');

    function updateCart() {
        cartCount.textContent = cart.length;
        localStorage.setItem('cart', JSON.stringify(cart));
    }

    function addToCart(productName) {
        cart.push(productName);
        updateCart();
    }

    document.getElementById('cartButton').addEventListener('click', () => {
        const cartItems = document.getElementById('cartItems');
        cartItems.innerHTML = cart.map(item => `
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div>${item}</div>
                <button class="btn btn-danger btn-sm" onclick="removeFromCart('${item}')">Remove</button>
            </div>
        `).join('');
    });

    function removeFromCart(productName) {
        cart = cart.filter(item => item !== productName);
        updateCart();
        document.getElementById('cartButton').click();
    }

    document.getElementById('checkoutButton').addEventListener('click', () => {
        const cartModal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
        cartModal.hide();
        new bootstrap.Modal(document.getElementById('checkoutModal')).show();
    });

    document.getElementById('paymentForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const checkoutModal = bootstrap.Modal.getInstance(document.getElementById('checkoutModal'));
        checkoutModal.hide();
        cart = [];
        updateCart();
        new bootstrap.Toast(document.getElementById('orderToast')).show();
    });

    // Initialize
    fetchProducts();
    updateCart();
</script>